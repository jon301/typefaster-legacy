(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define(["jquery","underscore","backbone","marionette","controllers/timer","models/player_human","models/player_ghost"],function(a,c,d,e,f,g,h){"use strict";var i,j;return i=function(a){function c(){return j=c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.entries="",c.prototype.duration=60,c.prototype.initialize=function(a){return this.duration=a.duration,this.entries=a.entries,this.humanPlayer=new g({entries:a.entries,gameController:this}),this.ghostPlayers=new d.Collection,this.timer=new f},c.prototype.startListen=function(){var a=this;return this.listening?void 0:(console.log("game: bind listen events"),this.listening=!0,this.listenTo(this,"entry:typed",function(b){return a.humanPlayer.typeEntry(b)}),this.listenTo(this,"entry:deleted",function(){return a.humanPlayer.deleteEntry()}),this.listenTo(this,"human:stop",function(){return a.stop()}))},c.prototype.stopListen=function(){return console.log("game: unbind listen events"),this.listening=!1,this.stopListening()},c.prototype.start=function(){var a=this;return!this.running&&(console.log("Game started"),this.running=!0,this.humanPlayer.play(),this.ghostPlayers.invoke("play"),this.duration)?(this.timer.start(),this.interval=setInterval(function(){return a.timer.getElapsedTime()>=1e3*a.duration&&(a.timer.stop(),a.stop()),a.trigger("human:stats",a.humanPlayer.getStats())},1e3)):void 0},c.prototype.stop=function(){return this.running?(console.log("Game stopped"),clearInterval(this.interval),this.stopListening(),this.humanPlayer.stop()):void 0},c.prototype.reset=function(){},c.prototype.setEntries=function(a){return this.running?void 0:(a&&(this.entries=a),console.log("You have "+this.duration+" seconds to type :"+this.entries))},c.prototype.setDuration=function(a){return this.running?void 0:(a&&(this.duration=a),console.log("You have "+this.duration+" seconds to type :"+this.entries))},c.prototype.addGhost=function(a){return this.running?void 0:this.ghostPlayers.add(new h({entries:this.entries,replayLogs:a,gameController:this}))},c}(e.Controller)})}).call(this);